{{ template "authflowv2/__page_frame.html" . }}

{{ define "page-content" }}
<h1 class="screen-title">
  {{ template "v2-change-password-page-title" }}
</h1>
<h2 class="screen-description mt-4">
{{ template "v2-change-password-page-subtitle" }}
</h2>

<form
  data-controller="password-policy"
  method="post"
  novalidate
  class="flex flex-col gap-y-4 mt-8"
>
{{ $.CSRFField }}

{{ template "authflowv2/__password_field.html" (dict
  "Ctx" $
  "Name" "x_new_password"
  "Type" "new-password"
  "AutoFocus" $.ShouldFocusInput
  "PasswordRules" $.PasswordRulesString
  "HasError" $.PasswordInputError.HasError 
  "HasErrorMessage" $.PasswordInputError.HasErrorMessage
  "InputAttrs" `
    data-password-policy-target="input"
    data-action="password-policy#check"
  `
)
}}
{{ template "authflowv2/__password_field.html" (dict
  "Ctx" $
  "Name" "x_confirm_password"
  "Type" "confirm-password"
  "HasError" $.ConfirmPasswordInputError.HasError 
  "HasErrorMessage" $.ConfirmPasswordInputError.HasErrorMessage
) }}
{{ template "authflowv2/__password_policy.html" (dict
  "PasswordPolicies" $.PasswordPolicies
) }}

<button
  class="primary-btn"
  type="submit"
  name="x_action"
  value=""
  data-authgear-event="authgear.button.change_password"
>
{{ template "v2-update-button-label" }}
</button>

</form>

{{ end }}
