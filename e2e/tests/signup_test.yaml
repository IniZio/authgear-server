name: Signup
project: signup
steps:
  - action: "create"
    input: |
      {
        "type": "signup",
        "name": "default"
      }
    assert:
      - field: "type"
        op: eq
        value: "signup"
      - field: "action.type"
        op: eq
        value: "identify"

  - input: |
      {
        "identification": "email",
        "login_id": "signup@authgear.com"
      }
    assert:
      - field: "action.type"
        op: eq
        value: "verify"

  - input: |
      {
        "code": "111111"
      }
    assert:
      - field: "action.type"
        op: eq
        value: "create_authenticator"

  - input: |
      {
        "authentication": "primary_password",
        "new_password":   "password"
      }
    assert:
      - field: "action.type"
        op: eq
        value: finished
