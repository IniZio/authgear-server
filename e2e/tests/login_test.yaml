name: Login
project: login
steps:
  - action: "create"
    input: |
      {
        "type": "login",
        "name": "default"
      }
    assert:
      - field: "type"
        op: eq
        value: "login"
      - field: "action.type"
        op: eq
        value: "identify"

  - input: |
      {
        "identification": "username",
        "login_id": "e2e_login"
      }
    assert:
      - field: "action.type"
        op: eq
        value: "authenticate"

  - input: |
      {
        "authentication": "primary_password",
        "password": "password"
      }
    assert:
      - field: "action.type"
        op: eq
        value: finished
---
name: Login with unknown account
project: login
steps:
  - action: "create"
    input: |
      {
        "type": "login",
        "name": "default"
      }
    assert:
      - field: "type"
        op: eq
        value: "login"
      - field: "action.type"
        op: eq
        value: "identify"

  - input: |
      {
        "identification": "username",
        "login_id": "e2e_login_missing"
      }
    assert:
      - field: "error.reason"
        op: eq
        value: "UserNotFound"
